["function _02ae01b42799ce7a189d3e1dcbff0fd810c11ea2",50,1280,"controller){Travelly.controller={}}if(!Travelly.controller.androidtablet){Travelly.controller.androidtablet={}}if(!Travelly.model){Travelly.model={}}if(!Travelly.profile){Travelly.profile={}}if(!Travelly.store){Travelly.store={}}",1317,292307,"util.Geolocation",366743,40,"util.GeoLocation\"],config:{autoUpdate:true,frequency:10000,latitude:null,longitude:null,accuracy:null,altitude:null,altitudeAccuracy:null,heading:null,speed:null,timestamp:null,allowHighAccuracy:false,timeout:Infinity,maximumAge:0,provider:undefined},updateMaximumAge:function(){if(this.watchOperation){this.updateWatchOperation()}},updateTimeout:function(){if(this.watchOperation){this.updateWatchOperation()}},updateAllowHighAccuracy:function(){if(this.watchOperation){this.updateWatchOperation()}},applyProvide",330983,33,"Geolocation){if(!a){if(navigator&&navigator.geolocation){a=navigator.geolocation}else{if(window.google){a=google.gears.factory.create(\"beta.geolocation\")}}}}else{this.fireEvent(\"locationerror\",this,false,false,true,\"This device does not support Geolocation.\")}return a},updateAutoUpdate:function(a,b){var c=this,f=c.getProvider();if(b&&f){clearInterval(c.watchOperationId);c.watchOperationId=null}if(a){if(!f){c.fireEvent(\"locationerror\",c,false,false,true,null);return}try{c.updateWatchOperation()}catch(d){c.fireEvent(\"locationerror\",c,false,false,true,d.message)}}},updateWatchOperation:function(){var a=this,b=a.getProvider();if(a.watchOperationId){clearInterval(a.watchOperationId)}function c(){b.getCurrentPosition(Ext.bind(a.fireUpdate,a),Ext.bind(a.fireError,a),a.parseOptions())}c();a.watchOperationId=setInterval(c,this.getFrequency())},updateLocation:function(h,a,c){var b=this,g=b.getProvider();var f=function(i,e){if(e){b.fireError(e)}else{b.fireEvent(\"locationerror\",b,false,false,true,i)}if(h){h.call(a||b,null,b)}};if(!g){f(null);return}try{g.getCurrentPosition(function(e){b.fireUpdate(e);if(h){h.call(a||b,b,b)}},function(e){f(null,e)},c||b.parseOptions())}catch(d){f(d.message)}},fireUpdate:function(a){var b=this,c=a.coords;this.position=a;b.setConfig({timestamp:a.timestamp,latitude:c.latitude,longitude:c.longitude,accuracy:c.accuracy,altitude:c.altitude,altitudeAccuracy:c.altitudeAccuracy,heading:c.heading,speed:c.speed});b.fireEvent(\"locationupdate\",b)},fireError:function(a){var b=a.code;this.fireEvent(\"locationerror\",this,b==a.TIMEOUT,b==a.PERMISSION_DENIED,b==a.POSITION_UNAVAILABLE,a.message==undefined?null:a.message)},parseOptions:function(){var b=this.getTimeout(),a={maximumAge:this.getMaximumAge(),enableHighAccuracy:this.getAllowHighAccuracy()};if(b!==Infinity){a.timeout=b}return a},destroy:function(){this.setAutoUpdate(false)}},0,0,0,0,0,0,[Ext.util,\"Geolocation\",Ext.util,\"GeoLoc",391423,33,"Map\",Ext.Container,{isMap:true,config:{baseCls:\"x-map\",useCurrentLocation:false,map:null,geo:null,mapOptions:{},mapListeners:null},constructor",479740,36,429071,34,"if(!(window.google||{}).maps){this.setHtml(\"Google Maps API is required\")}",479728,75,"initMap();this.on({painted:\"doResize\",scope:this});this.innerElement.on(\"touchstart\",\"onTouchStart\",this)},initMap:function(){var f=this.getMap();if(!f){var e=(window.google||{}).maps;if(!e){return null}var b=this.mapContainer,a=this.getMapOptions(),d=e.event,c=this;if(b.dom.firstChild){Ext.fly(b.dom.firstChild).destroy()}if(Ext.os.is.iPad){Ext.merge({navigationControlOptions:{style:e.NavigationControlStyle.ZOOM_PAN}},a)}a.mapTypeId=a.mapTypeId||e.MapTypeId.ROADMAP;a.center=a.center||new e.LatLng(37.381592,-122.135672);if(a.center&&a.center.latitude&&!Ext.isFunction(a.center.lat)){a.center=new e.LatLng(a.center.latitude,a.center.longitude)}a.zoom=a.zoom||12;f=new e.Map(b.dom,a);this.setMap(f);d.addListener(f,\"zoom_changed\",Ext.bind(c.onZoomChange,c));d.addListener(f,\"maptypeid_changed\",Ext.bind(c.onTypeChange,c));d.addListener(f,\"center_changed\",Ext.bind(c.onCenterChange,c));d.addListenerOnce(f,\"tilesloaded\",Ext.bind(c.onTilesLoaded,c));this.addMapListeners()}return this.getMap()},renderMap:function(){this.initMap()",170063,62,311247,41,276748,33,",children:[{reference:\"mapContainer\",className:\"x-map-container\"}]}]}},onTouchStart:function(a){a.makeUnpreventable()},applyMapOptions:function(a){return Ext.merge({},this.options,a)},updateMapOptions:function(c){var b=(window.google||{}).maps,a=this.getMap();if(b&&a){a.setOptions(c)}},doMapCenter:function(){this.setMapCenter(this.getMapOptions().center)},getMapOptions:function(){return Ext.merge({},this.options||this.getInitialConfig(\"mapOptions\"))},updateUseCurrentLocation:function(a){this.setGeo(a);if(!a){this.setMapCenter()}},applyGeo",266400,34,"Ext.util.Geolocation,this.getGeo())},updateGeo:function(b,a){var c={locationupdate:\"onGeoUpdate\",locationerror:\"onGeoError\",scope:this};if(a){a.un(c)}if(b){b.on(c);b.updateLocation()}},doResize:function(){var b=(window.google||{}).maps,a=this.getMap();if(b&&a){b.event.trigger(a,\"resize\")}},onTilesLoaded:function(){this.fireEvent(\"maprender\",this,this.getMap())},addMapListeners:function(){var e=(window.google||{}).maps,a=this.getMap(),j=this.getMapListeners();if(e){var b=e.event,h=this,d,k,i,g,f;if(Ext.isSimpleObject(j)){for(var c in j){d=j[c];if(Ext.isSimpleObject(d)){k=d.scope;i=d.fn}else{if(Ext.isFunction(d)){k=null;i=d}}if(i){g=function(){this.fn.apply(this.scope,[h]);if(this.handle){b.removeListener(this.handle);delete this.handle;delete this.fn;delete this.scope}};f=b.addListener(a,c,Ext.bind(g,g));g.fn=i;g.scope=k;if(d.single===true){g.handle=f}}}}}},onGeoUpdate:function(a){if(a){this.setMapCenter(new google.maps.LatLng(a.getLatitude(),a.getLongitude()))}},onGeoError:Ext.emptyFn,setMapCenter:function(e){var b=this,d=b.getMap(),a=b.getMapOptions(),c=(window.google||{}).maps;if(c){if(!e){if(d&&d.getCenter){e=d.getCenter()}else{if(a.hasOwnProperty(\"center\")){e=a.center}else{e=new c.LatLng(37.381592,-122.135672)}}}if(e&&!(e instanceof c.LatLng)&&\"longitude\" in e){e=new c.LatLng(e.latitude,e.longitude)}if(!d){a.center=a.center||e;b.renderMap();d=b.getMap()}if(d&&e instanceof c.LatLng){d.panTo(e)}else{this.options=Ext.apply(this.getMapOptions(),{center:e})}}},onZoom",194604,32,"MapOptions(),c=this.getMap(),b;b=(c&&c.getZoom)?c.getZoom():a.zoom||10;this.options=Ext.apply(a,{zoom:b});this.fireEvent(\"zoomchange\",this,c,b)},onType",487855,32,"MapOptions(),c=this.getMap(),a;a=(c&&c.getMapTypeId)?c.getMapTypeId():b.mapTypeId;this.options=Ext.apply(b,{mapTypeId:a});this.fireEvent(\"typechange\",this,c,a)},onCenter",487855,32,"MapOptions(),c=this.getMap(),a;a=(c&&c.getCenter)?c.getCenter():b.center;this.options=Ext.apply(b,{center:a});this.fireEvent(\"centerchange\",this,c,",301451,43,"Geo());var a=this.getMap();if(a&&(window.google||{}).maps){google.maps.event.clearInstanceListeners(a)}Ext.Container",301520,32,"1,[\"map\"],[\"component\",\"container\",\"map",482159,34,"map:true},[\"widget.map\"],0,[Ext,\"Map",335023,39,296148,5486,"Img\",Ext.Component,{config:{src:null,baseCls:\"x-img\",imageCls:\"x-img-image\",backgroundCls:\"x-img-background\",mode:\"background\"},beforeI",313103,32,"a.onLoad=Ext.Function.bind(a.onLoad,a);a.onError=Ext.Function.bind(a.onError,a)}",478592,38,262768,42,"a.relayEvents(a.renderElement,\"*\");a.element.on({tap:\"onTap\",scope:a})},hid",262751,37,"hide",429082,34,"Src=this.hiddenSrc||this.getSrc();this.setSrc(null)},show",262752,36,"show.apply(this,arguments);if(this.hiddenSrc){this.setSrc(this.hiddenSrc);delete this.hiddenSrc}},updateMode",267275,32,"mageCls(),b=c.getBackgroundCls();if(d===\"background\"){if(c.imageElement){c.imageElement.destroy();delete c.imageElement;c.updateSrc(c.getSrc())}c.replaceCls(a,b)}else{c.imageElement=c.element.createChild({tag:\"img\"});c.replaceCls(b,a)}},updateImageCls:function(b,a){this.replaceCls(a,b)},updateBackgroundCls:function(b,a){this.replaceCls(a,b)},",309524,34,"tap\",this,a)},onAfterRender:function(){this.updateSrc(this.getSrc())},updateSrc:function(a){var b=this,c;if(b.getMode()===\"background\"){c=this.imageObject||new Image()}else{c=b.imageElement.dom}this.imageObject=c;c.setAttribute(\"src\",Ext.isString(a)?a:\"\");c.addEventListener(\"load\",b.onLoad,false);c.addEventListener(\"error\",b.onError,false)},detachListeners:function(){var a=this.imageObject;if(a){a.removeEventListener(\"load\",this.onLoad,false);a.removeEventListener(\"error\",this.onError,false)}},onLoad:function(a){this.detachListeners();if(this.getMode()===\"background\"){this.element.dom.style.backgroundImage='url(\"'+this.imageObject.src+'\")'}this.fireEvent(\"load\",this,a)},onError:function(a){this.detachListeners();if(this.getMode()===\"background\"){this.element.dom.style.backgroundImage='url(\"'+this.imageObject.src+'\")'}this.fireEvent(\"error\",this,a)},doSetWidth:function(b){var a=(this.getMode()===\"background\")?this.element:this.imageElement;a.setWidth(b);Ext.Componen",317373,44,"},doSetHeight:function(b){var a=(this.getMode()===\"background\")?this.element:this.imageElement;a.setHeight(b);Ext.Component",488719,47,"estroy:function(){this.detachListeners();Ext.destroy(this.imageObject,this.imageElement);delete this.imageObject;delete this.imageElement",295982,46,"0,[\"image\",\"img\"],[\"component\",\"image\",\"img\"],{component:true,image:true,img:true},[\"widget.image\",\"widget.img\"],0,[Ext,\"Img",301606,24534,327684,95284,"proxy.WebStorage",369202,54,"WebStorageProxy\",config:{id:undefined,reader:null,writer:null,enablePagingParams:false,defaultDateFormat:\"Y-m-d H:i:s.u\"},constructor:function(a){Ext.data.proxy.Clien",443616,45,";this.cache={}},updateModel:function(a){if(!this.getId()){this.setId(a.modelName)}Ext.data.proxy.Client.prototype.updateModel.apply(this,arguments)},create:function(e,h,j){var d=e.getRecords(),c=d.length,a=this.getIds(),b,g,f;e.setStarted();for(f=0;f<c;f++){g=d[f];b=g.getId();this.setRecord(g);a.push(b)}this.setIds(a);e.setCompleted();e.setSuccessful();if(typeof h==\"function\"){h.call(j||this,e)}},read:function(h,o,p){var e=[],a=this.getIds(),l=this.getModel(),q=l.getIdProperty(),g=h.getParams()||{},n=h.getSorters(),d=h.getFilters(),b=h.getStart(),f=h.getLimit(),c=a.length,j,k,m;if(g[q]!==undefined){k=this.getRecord(g[q]);if(k){e.push(k);h.setSuccessful()}}else{for(j=0;j<c;j++){k=this.getRecord(a[j]);if(k){e.push(k)}}m",340331,33,");if(d&&d.length){m.setFilters(d)}if(n&&n.length){m.setSorters(n)}m.addAll(e);if(this.getEnablePagingParams()&&b!==undefined&&f!==undefined){e=m.items.slice(b,b+f)}else{e=m.items.slice()}h.setSuccessful()}h.setCompleted();h.setResultSet(Ext.create(\"Ext.data.ResultSet\",{records:e,total:e.length,loaded:true}));h.setRecords(e);if(typeof o==\"function\"){o.call(p||this,h)}},update:function(e,h,j){var d=e.getRecords(),c=d.length,a=this.getIds(),g,b,f;e.setStarted();for(f=0;f<c;f++){g=d[f];this.setRecord(g);b=g.getId();if(b!==undefined&&Ext.Array.indexOf(a,b)==-1){a.push(b)}}this.setIds(a);e.setCompleted();e.setSuccessful();if(typeof h==\"function\"){h.call(j||this,e)}},destroy:function(b,h,e){var a=b.getRecords(),f=a.length,d=this.getIds(),g=[].concat(d),c;b.setStarted();for(c=0;c<f;c++){Ext.Array.remove(g,a[c].getId());this.removeRecord(a[c],false)}this.setIds(g);",369408,35,"if(typeof h==\"function\"){h.call(e||this,b)}},getRecord:function(c){if(this.cache[c]===undefined){var m=this.getRecordKey(c),n=this.getStorageObject().getItem(m),g={},e=this.getModel(),k=e.getFields().items,d=k.length,h,l,b,j,a,f;if(!n){return undefined}a=Ext.decode(n);for(h=0;h<d;h++){l=k[h];b=l.getName();f=a[b];if(typeof l.getDecode()==\"function\"){g[b]=l.getDecode()(f)}else{if(l.getType().type==\"date\"){g[b]=this.readDate(l,f)}else{g[b]=f}}}j=new e(g,c);this.cache[c]=j}return this.cache[c]},setRecord:function(l,c){if(c){l.setId(c)}else{c=l.getId()}var o=this,a=l.getData(),k={},f=o.getModel(),m=f.getFields().items,d=m.length,j=0,g,p,b,h,q;for(;j<d;j++){p=m[j];b=p.getName();g=a[b];if(p.getPersist()===false){continue}if(typeof p.getEncode()==\"function\"){k[b]=p.getEncode()(g,l)}else{if(p.getType().type==\"date\"&&Ext.isDate(g)){k[b]=this.writeDate(p,g)}else{k[b]=g}}}h=o.getStorageObject();q=o.getRecordKey(c);o.cache[c]=l;h.removeItem(q);try{h.setItem(q,Ext.encode(k))}catch(n",369759,35,")}l.commit()},removeRecord:function(d,c){var b=this,a;if(d.isModel){d=d.getId()}if(c!==false){a=b.getIds();Ext.Array.remove(a,d);b.setIds(a)}delete this.cache[d];b.getStorageObject().removeItem(b.getRecordKey(d))},getRecordKey:function(a){if(a.isModel){a=a.getId()}return Ext.String.format(\"{0}-{1}\",this.getId(),a)},getIds:function(){var b=(this.getStorageObject().getItem(this.getId())||\"\").split(\",\"),c=b.length,a;if(c==1&&b[0]===\"\"){b=[]}return b},setIds:function(a){var c=this.getStorageObject(),d=a.join(\",\"),f=this.getId();c.removeItem(f);if(!Ext.isEmpty(d)){try{c.setItem(f,d)}catch(b",369759,34,"b)}}},writeDate:function(c,b){if(Ext.isEmpty(b)",364031,39,"this.getDefaultDateFormat()",364081,119,"readDate:function(c,b){if(Ext.isEmpty(b)",364031,39,"this.getDefaultDateFormat()",364081,34,"new Date(b*1000);case\"time\":return new Date(b);default:return Ext.isDate(b)?b:Ext.Date.parse(b,a)}},initialize:function(){Ext.data.proxy.Clien",505089,44,";var a=this.getStorageObject();try{a.setItem(this.getId(),a.getItem(this.getId())||\"\")}catch(b",369759,34,"b)}},clear:function(){var d=this.getStorageObject(),c=this.getIds(),a=c.length,b;for(b=0;b<a;b++){this.removeRecord(c[b],false)}d.removeItem(this.getId())},getStorageObject:function(){}},1,0,0,0,0,0,[Ext.data.proxy,\"WebStorage\",Ext.data,\"WebStorage",369152,44,"LocalStorage\",Ext.data.proxy.WebStorag",392123,32,"LocalStorageProxy\",getStorageObject:function(){return window.localStorage}},0,0,0,0,[\"proxy.localstorage\"],0,[Ext.data.proxy,\"LocalStorage\",Ext.data,\"LocalStorage",369152,38,422968,83164,"model.Picture\",Ext.data.Model,{config:{fields:[{name:\"id\",type:\"int\"},{name:\"url\",type:\"string\"},{name:\"title\",type:\"string\"},{name:\"lon\",type:\"string\"},{name:\"lat\",type:\"string\"}]}},0,0,0,0,0,0,[Travelly.model,\"Picture",506099,33,"store.Pictures\",Ext.data.Store,{config:{model:\"Travelly.model.Picture\",storeId:\"Pictures\",autoLoad:true,autoSync:true,proxy:{type:\"localstorage\"}}},0,0,0,0,0,0,[Travelly.store,\"Pictures",506099,106,"New Photo\",iconCls:\"compose",506631,47,"New Photo\"},{xtype:\"container\",width:\"100%\",height:\"100%\"",318057,34,",align:\"center\"},items:[{xtype:\"image\",src:\"http://placehold.it/200x200\",height:200,width:200},{xtype:\"button\",text:\"Take Photo 111\",id:\"takePhotoBtn\",iconCls:\"add\",width:150}]}]},{title:\"My Places\",iconCls:\"maps",506631,47,"Places I visited\"},{xtype:\"map\",useCurrentLocation:true,width:\"100%\",height:\"100%",506871,164,"(Ext.cmd.derive(\"Travelly.controller.Main\",Ext.app.Controller,{config:{refs:{takePhotoBtn:\"#takePhotoBtn\"},control:{takePhotoBtn:{tap:\"getPhoto\"}}},onPhotoDataSuccess:function(b){var a=document.getElementById(\"smallImage\");a.style.display=\"block\";a.src=\"data:image/jpeg;base64,\"+b},onPhotoFileSuccess:function(b){var a=document.getElementById(\"smallImage\");a.style.display=\"block\";a.src=b},onPhotoURISuccess:function(b){alert(\"Success\");var a=Ext.ComponentQuery.query(\"image\")[0];a.setSrc(b)},capturePhotoWithData:function(){navigator.camera.getPicture(onPhotoDataSuccess,onFail,{quality:50})},capturePhotoWithFile:function(){navigator.camera.getPicture(onPhotoFileSuccess,onFail,{quality:50,destinationType:Camera.DestinationType.FILE_URI})},getPhoto:function(){alert(\"Get photo clicked\");navigator.camera.getPicture(this.onPhotoURISuccess,this.onFail,{quality:50,destinationType:destinationType.FILE_URI,sourceType:Camera.PictureSourceType.CAMERA})},onFail:function(a){alert(\"Failed because: \"+a)}},0,0,0,0,0,0,[Travelly.controller,\"Main",506099,33,"controller.androidtablet.Main\",Ext.app.Controller,{config:{refs:{},control:{}},launch:function(){alert(\"AndroidTablet.Main launch\")},init:function(){alert(\"AndroidTablet.Main init\")}},0,0,0,0,0,0,[Travelly.controller.androidtablet,\"Main",506099,33,"profile.AndroidTablet\",Ext.app.Profile,{config:{views:[],models:[],stores:[],controllers:[\"Main\"]},isActive:function(a){return Ext.os.deviceType==\"Tablet\"&&Ext.os.is.Android}},0,0,0,0,0,0,[Travelly.profile,\"AndroidTablet",507028,40,"profiles:[\"AndroidTablet\"],models:[\"Picture\"],stores:[\"Pictures\"],views:[\"Main\"],controller",507072,575,";if(Ext.browser.is.PhoneGap){alert(device.uuid)}else{alert(\"Simulate UUID\")}",507647,206]